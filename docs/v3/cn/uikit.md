[返回父文档](./index.md)

- [UIKit 介绍](#uikit-介绍)
  - [初始化](#初始化)
  - [主题](#主题)
  - [国际化](#国际化)
  - [业务组件](#业务组件)
  - [基础组件](#基础组件)
  - [事件分发](#事件分发)
  - [自定义头像和昵称](#自定义头像和昵称)
    - [被动注册](#被动注册)
    - [主动调用](#主动调用)

# UIKit 介绍

这里介绍 2.1 版本的 UIKit 组件库。 组件库包括主题、国际化、核心业务 UI 组件、基础 UI 组件、chat 服务组件、事务分发服务组件等。

UIKit 组件库需要先初始化配置在使用。这里介绍核心内容，其它详见定义和类型声明。

## 初始化

初始化分布的参数非常多。核心要点就是 需要填写 `appKey`，需要设置是否自动登录，其它参数可选。详见 `ContainerProps` 类型。

详见 `example/src/demo/App.tsx` 示例。

## 主题

主题主要提供了调色板和主题两个部分。调色板主要负责基础的样式、颜色、布局等。主题是组合调色板的配置的高级选项，最后提供明暗两种风格。

详见 `example/src/demo/App.tsx` 示例。

## 国际化

国际化目前提供了中文和英文两种默认内容。支持自定义其它语言包、扩展现有语言内容。

详见 `example/src/demo/App.tsx` 示例。

## 业务组件

业务组件是基础组件组成的，主要包括会话列表组件、联系人列表组件、群组列表组件、群成员列表组件、群成员列表组件、好友申请通知列表组件、聊天页面组件、群详情组件、联系人详情组件等。
其中联系人列表组件为复用组件，支持创建群组、创建新会话、邀请多人音视频等操作。聊天页面组件也是复用组件，支持普通聊天模式、话题模式、搜索模式。

详见 `example/src/demo/screens/ConversationDetailScreen.tsx` 示例。

## 基础组件

基础组件包括 UI 基础组件、和辅助组件，UI 基础组件是业务组件组成的基石，可以快速构建业务组件，也推荐用户使用这些组件创建自定义组件，辅助组件主要完成媒体服务、类型检查、属性获取、持久化处理等。

UI 基础组件在 `packages/react-native-chat-uikit/src/ui` 这里。
hooks 组件在 `packages/react-native-chat-uikit/src/hook` 这里。

## 事件分发

当数据发生变化，UI 组件需要更新，这里使用事件分发通知对应关注的组件。这个工具在 `packages/react-native-chat-uikit/src/dispatch` 这里。

举例：当群修改名称之后，群列表、会话列表、聊天页面、群详情页面等需要处理该通知，同步名称。
举例：当联系人修改备注之后，联系人列表、会话列表、聊天页面、联系人详情页面等需要处理该通知，同步名称。

对于，开发者自定义的组件，也需要关注这些通知的变化。

## 自定义头像和昵称

UIKit 组件提供了修改昵称和头像的机会。主要通过被动注册和主动调用完成。

### 被动注册

在初始化阶段 通过 `onUsersHandler` 和 `onGroupsHandler` 注册回调，在需要调用时候，传递默认值，返回新值的方式完成自定义。

### 主动调用

在需要的地方，通过 `ChatService.updateDataList` 更新自定义数据，并且通知关注的组件。
